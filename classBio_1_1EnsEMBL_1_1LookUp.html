<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Ensembl Metadata: Bio::EnsEMBL::LookUp Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
</head>
<body>
<div id="top"><!-- do not remove this div! -->

<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr>
  
  
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.4 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<script type="text/javascript">
function hasClass(ele,cls) {
  return ele.className.match(new RegExp('(\\s|^)'+cls+'(\\s|$)'));
}

function addClass(ele,cls) {
  if (!this.hasClass(ele,cls)) ele.className += " "+cls;
}

function removeClass(ele,cls) {
  if (hasClass(ele,cls)) {
    var reg = new RegExp('(\\s|^)'+cls+'(\\s|$)');
    ele.className=ele.className.replace(reg,' ');
  }
}

function toggleVisibility(linkObj) {
 var base = linkObj.getAttribute('id');
 var summary = document.getElementById(base + '-summary');
 var content = document.getElementById(base + '-content');
 var trigger = document.getElementById(base + '-trigger');
 if ( hasClass(linkObj,'closed') ) {
   summary.style.display = 'none';
   content.style.display = 'block';
   trigger.src = 'open.png';
   removeClass(linkObj,'closed');
   addClass(linkObj,'opened');
 } else if ( hasClass(linkObj,'opened') ) {
   summary.style.display = 'block';
   content.style.display = 'none';
   trigger.src = 'closed.png';
   removeClass(linkObj,'opened');
   addClass(linkObj,'closed');
 }
 return false;
}
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Overview</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directory&#160;Browser</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="annotated.html"><span>Full&#160;Class&#160;List</span></a></li>
      <li><a href="functions.html"><span>Methods&#160;from&#160;all&#160;packages</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('classBio_1_1EnsEMBL_1_1LookUp.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Available Methods</a>  </div>
  <div class="headertitle">
<div class="title">Bio::EnsEMBL::LookUp Class Reference</div>  </div>
</div>
<div class="contents">
<!-- doxytag: class="Bio::EnsEMBL::LookUp" -->
<p><a href="classBio_1_1EnsEMBL_1_1LookUp-members.html">List of all members.</a></p>
<hr/><a name="details" id="details"></a><h2>Class Summary</h2>
<div class="textblock"><h2><a class="anchor" id="Synopsis"></a>
Synopsis</h2>
<div class="fragment"><pre class="fragment"><span class="preprocessor"># default creation using latest public release of Ensembl Genomes</span>
<span class="preprocessor">my $lookup = Bio::EnsEMBL::LookUp-&gt;new();</span>
</pre></div> <h2><a class="anchor" id="Description"></a>
Description</h2>
 <pre>
This module is a helper that provides additional methods to aid navigating a registry of >30000 species across >200 databases. 
It does not replace the Registry but provides some additional methods for finding species e.g. by searching for species that 
have an alias that match a regular expression, or species which are derived from a specific ENA/INSDC accession, or species
that belong to a particular part of the taxonomy. 

There are a number of ways of creating a lookup but the simplest is to use the default setting of the latest publicly 
available Ensembl Genomes databases: 

	my $lookup = Bio::EnsEMBL::LookUp->new();

Once a lookup has been created, there are various methods to retreive DBAdaptors for species of interest:

1. To find species by name - all DBAdaptors for species with a name or alias matching the supplied string:

	$dbas = $lookup->get_by_name_exact('Escherichia coli str. K-12 substr. MG1655');

2. To find species by name pattern - all DBAdaptors for species with a name or alias matching the supplied regexp:

	$dbas = $lookup->get_by_name_exact('Escherichia coli .*);

3. To find species with the supplied taxonomy ID:

	$dbas = $lookup->get_all_by_taxon_id(388919);
	
4. To find DBAs for all descendants of a node:

	$dbas = $lookup->get_all_by_taxon_branch(511145);

The retrieved DBAdaptors can then be used as normal e.g.

	for my $gene (\@{$dba->get_GeneAdaptor()->fetch_all_by_biotype('protein_coding')}) {
		print $gene->external_name."\n";
	}

If a DBAdaptor is not likely to be used again, it should be disconnected to avoid running out of connections 
(a disconnected DBAdaptor can be used again without having to be explicitly reconnected):
    
    $dba->dbc()->disconnect_if_idle();

Once retrieved, the arguments needed for constructing a DBAdaptor directly can be dumped for later use e.g.

	my $args = $lookup->dba_to_args($dba);
	... store and retrieve $args for use in another script ... 
	my $resurrected_dba = Bio::EnsEMBL::DBSQL::DBAdaptor->new(\@$args);

</pre>
<h2>Local implementation</h2>
<pre>

The default implementation of LookUp is a remoting implementation that uses a MySQL database backend
to look up genome information. The previous implementation loaded an internal hash from either a JSON file
(remote or local) or by processing the contents of the Registry. 

This implementation is still available, but has been renamed Bio::EnsEMBL::LookUp::LocalLookUp and should
be constructed directly.
  
</pre> 
<p>Definition at line <a class="el" href="LookUp_8pm_source.html#l00078">78</a> of file <a class="el" href="LookUp_8pm_source.html">LookUp.pm</a>.</p>
</div><table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Available Methods</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp.html#ad998c857db3e1e393bec7dc25aac0f8e">AUTOLOAD</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp.html#a6997a685311b58bc4a6441611d65e99f">DESTROY</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp.html#a004a9eccc10f89787bab3b32bb4a1366">new</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp.html#a1e2fd5181ddeae8d7683a56affa1733c">register_all_dbs</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp.html#a555cb63ba0611127ed3c0742756e0346">uniq</a> ()</td></tr>
</table>
<hr/><h2>Method Documentation</h2>
<a class="anchor" id="ad998c857db3e1e393bec7dc25aac0f8e"></a><!-- doxytag: member="Bio::EnsEMBL::LookUp::AUTOLOAD" ref="ad998c857db3e1e393bec7dc25aac0f8e" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Bio::EnsEMBL::LookUp::AUTOLOAD </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented method</p>
<div id="codesection-AUTOLOAD" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
	<img id='codesection-AUTOLOAD-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-AUTOLOAD-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-AUTOLOAD-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><pre class="fragment">sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp.html#ad998c857db3e1e393bec7dc25aac0f8e">AUTOLOAD</a> {
   my ( $self, @args ) = @_;
   (my $method = $AUTOLOAD) =~ s/^.*::(\w+)$/$1/ ;
   <span class="keywordflow">return</span> $self-&gt;{lookup}-&gt;$method(@args);
}
</pre></div> </div> 
</div>
</div>
<a class="anchor" id="a6997a685311b58bc4a6441611d65e99f"></a><!-- doxytag: member="Bio::EnsEMBL::LookUp::DESTROY" ref="a6997a685311b58bc4a6441611d65e99f" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Bio::EnsEMBL::LookUp::DESTROY </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented method</p>
<div id="codesection-DESTROY" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
	<img id='codesection-DESTROY-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-DESTROY-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-DESTROY-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><pre class="fragment">sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp.html#a6997a685311b58bc4a6441611d65e99f">DESTROY</a> { }    # required due to <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp.html#ad998c857db3e1e393bec7dc25aac0f8e">AUTOLOAD</a>
</pre></div> </div> 
</div>
</div>
<a class="anchor" id="a004a9eccc10f89787bab3b32bb4a1366"></a><!-- doxytag: member="Bio::EnsEMBL::LookUp::new" ref="a004a9eccc10f89787bab3b32bb4a1366" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Bio::EnsEMBL::LookUp::new </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented method</p>
<div id="codesection-new" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
	<img id='codesection-new-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-new-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-new-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><pre class="fragment">sub <span class="keyword">new</span> {
  my ($class, @args) = @_;
  my $self = bless({}, ref($class) || $class);
  ($self-&gt;{lookup}, $self-&gt;{registry},
   $self-&gt;{url},    $self-&gt;{file}
  ) = rearrange([qw(lookup registry url file)], @args);
  <span class="keywordflow">if</span> (defined $self-&gt;{url} ||
      defined $self-&gt;{registry} ||
      defined $self-&gt;{file})
  {
    warning(
q/Direct construction of local or url\/file-based LookUp deprecated.  
    Use <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp.html">Bio::EnsEMBL::LookUp</a>-&gt;<a class="code" href="classBio_1_1EnsEMBL_1_1LookUp.html#a004a9eccc10f89787bab3b32bb4a1366">new</a>() <span class="keywordflow">for</span> <span class="keyword">new</span> remoting implementation or
    use Bio::EnsEMBL::LookUp::LocalLookUp-&gt;new() directly <span class="keywordflow">for</span> previous implementation/
    );
    $self-&gt;{lookup} =
      Bio::EnsEMBL::LookUp::LocalLookUp-&gt;new(@args);
  }
  <span class="keywordflow">if</span> (!defined $self-&gt;{lookup}) {
    $self-&gt;{lookup} = Bio::EnsEMBL::LookUp::RemoteLookUp-&gt;new(@args);
  }
  <span class="keywordflow">return</span> $self;
}
</pre></div> </div> 
</div>
</div>
<a class="anchor" id="a1e2fd5181ddeae8d7683a56affa1733c"></a><!-- doxytag: member="Bio::EnsEMBL::LookUp::register_all_dbs" ref="a1e2fd5181ddeae8d7683a56affa1733c" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Bio::EnsEMBL::LookUp::register_all_dbs </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented method</p>
<div id="codesection-register_all_dbs" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
	<img id='codesection-register_all_dbs-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-register_all_dbs-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-register_all_dbs-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><pre class="fragment">sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp.html#a1e2fd5181ddeae8d7683a56affa1733c">register_all_dbs</a> {
  my ($class, $host, $port, $user, $pass, $regexp) = @_;
  warning(
    q/<a class="code" href="classBio_1_1EnsEMBL_1_1LookUp.html#a1e2fd5181ddeae8d7683a56affa1733c">register_all_dbs</a> is now part of Bio::EnsEMBL::LookUp::LocalLookUp 
  and should be invoked directly/);
  Bio::EnsEMBL::LookUp::LocalLookUp-&gt;register_all_dbs($host, $port,
                                                 $user, $pass, $regexp);
  <span class="keywordflow">return</span>;
}
</pre></div> </div> 
</div>
</div>
<a class="anchor" id="a555cb63ba0611127ed3c0742756e0346"></a><!-- doxytag: member="Bio::EnsEMBL::LookUp::uniq" ref="a555cb63ba0611127ed3c0742756e0346" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Bio::EnsEMBL::LookUp::uniq </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented method</p>
<div id="codesection-uniq" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
	<img id='codesection-uniq-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-uniq-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-uniq-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><pre class="fragment">sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp.html#a555cb63ba0611127ed3c0742756e0346">uniq</a> {
    my @out = ();
    my $keys = {};
    <span class="keywordflow">for</span> my $v (@_) {
        <span class="keywordflow">if</span>(!exists $keys-&gt;{$v}) {
            push @out,$v;
            $keys-&gt;{$v} = 1;
        } 
    }
    <span class="keywordflow">return</span> @out;
}
</pre></div> </div> 
</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>Bio/EnsEMBL/<a class="el" href="LookUp_8pm_source.html">LookUp.pm</a></li>
</ul>
</div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="namespaceBio.html">Bio</a>      </li>
      <li class="navelem"><a class="el" href="namespaceBio_1_1EnsEMBL.html">EnsEMBL</a>      </li>
      <li class="navelem"><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp.html">LookUp</a>      </li>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

  </div>
</body>
</html>
