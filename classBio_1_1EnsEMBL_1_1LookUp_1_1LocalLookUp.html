<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Ensembl Metadata: Bio::EnsEMBL::LookUp::LocalLookUp Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
</head>
<body>
<div id="top"><!-- do not remove this div! -->

<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr>
  
  
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.4 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<script type="text/javascript">
function hasClass(ele,cls) {
  return ele.className.match(new RegExp('(\\s|^)'+cls+'(\\s|$)'));
}

function addClass(ele,cls) {
  if (!this.hasClass(ele,cls)) ele.className += " "+cls;
}

function removeClass(ele,cls) {
  if (hasClass(ele,cls)) {
    var reg = new RegExp('(\\s|^)'+cls+'(\\s|$)');
    ele.className=ele.className.replace(reg,' ');
  }
}

function toggleVisibility(linkObj) {
 var base = linkObj.getAttribute('id');
 var summary = document.getElementById(base + '-summary');
 var content = document.getElementById(base + '-content');
 var trigger = document.getElementById(base + '-trigger');
 if ( hasClass(linkObj,'closed') ) {
   summary.style.display = 'none';
   content.style.display = 'block';
   trigger.src = 'open.png';
   removeClass(linkObj,'closed');
   addClass(linkObj,'opened');
 } else if ( hasClass(linkObj,'opened') ) {
   summary.style.display = 'block';
   content.style.display = 'none';
   trigger.src = 'closed.png';
   removeClass(linkObj,'opened');
   addClass(linkObj,'closed');
 }
 return false;
}
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Overview</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directory&#160;Browser</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="annotated.html"><span>Full&#160;Class&#160;List</span></a></li>
      <li><a href="functions.html"><span>Methods&#160;from&#160;all&#160;packages</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Available Methods</a>  </div>
  <div class="headertitle">
<div class="title">Bio::EnsEMBL::LookUp::LocalLookUp Class Reference</div>  </div>
</div>
<div class="contents">
<!-- doxytag: class="Bio::EnsEMBL::LookUp::LocalLookUp" -->
<p><a href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp-members.html">List of all members.</a></p>
<hr/><a name="details" id="details"></a><h2>Class Summary</h2>
<div class="textblock"><h2><a class="anchor" id="Synopsis"></a>
Synopsis</h2>
<div class="fragment"><pre class="fragment"><span class="preprocessor"># creation from a database server</span>
<span class="preprocessor"></span>Bio::EnsEMBL::LookUp::LocalLookUp-&gt;register_all_dbs( $conf-&gt;{host},
       $conf-&gt;{port}, $conf-&gt;{user}, $conf-&gt;{pass}, $conf-&gt;{db});
my $lookup = Bio::EnsEMBL::LookUp::LocalLookUp-&gt;new();
my $dbas = $lookup-&gt;registry()-&gt;get_all();
$dbas = $lookup-&gt;get_all_by_taxon_id(388919);
$dbas = $lookup-&gt;get_by_name_pattern(<span class="stringliteral">&quot;Escherichia.*&quot;</span>);

<span class="preprocessor"># creation from a URL</span>
<span class="preprocessor">my $lookup = Bio::EnsEMBL::LookUp::::LocalLookUp-&gt;new(-URL=&gt;&#39;http://bacteria.ensembl.org/registry.json&#39;);</span>
</pre></div> <h2><a class="anchor" id="Description"></a>
Description</h2>
 <pre>
This module is an implementation of Bio::EnsEMBL::LookUp that uses a local hash to store information about available Ensembl Genomes data. 
It can be constructed in a number of different ways:

A remote cache file containing a JSON representation of the hash can be supplied:

	my $lookup = Bio::EnsEMBL::LookUp::LocalLookUp->new(-URL=>'http://bacteria.ensembl.org/registry.json');

Alternatively, a local file containing the required JSON can be specified instead:

	my $lookup = Bio::EnsEMBL::LookUp::LocalLookUp->new(-FILE=>"/path/to/reg.json");

Finally, a Registry already loaded with core databases can be supplied:

	my $lookup = Bio::EnsEMBL::LookUp::LocalLookUp->new(-REGISTRY=>'Bio::EnsEMBL::Registry');

If the standard Registry is used, the Arg can be omitted completely:

	my $lookup = Bio::EnsEMBL::LookUp::LocalLookUp->new();

To populate the registry with just the Ensembl Genomes databases for the current software 
release on a specified server, the following method can be used:

	Bio::EnsEMBL::LookUp::LocalLookUp->register_all_dbs( $host,
	   $port, $user, $pass);

Once a lookup has been created, it can be used as specified in Bio::EnsEMBL::LookUp

</pre> <h2><a class="anchor" id="See-also"></a>
See-also</h2>
<p><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp.html">Bio::EnsEMBL::LookUp</a> </p>

<p>Definition at line <a class="el" href="LocalLookUp_8pm_source.html#l00066">66</a> of file <a class="el" href="LocalLookUp_8pm_source.html">LocalLookUp.pm</a>.</p>
</div><table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Available Methods</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">protected&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#ac5135d70a780c28ea235e9ff54468b52">_add_aliases</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">protected&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#ac1905013637d49ee18e9d1bc431c192f">_check_name</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">protected&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#aac5ffdeaa984aa8205f8a094e05628ef">_dba_id</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">protected&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#a33750117ab1c474dd86ac60ffd7a0746">_dba_to_locator</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">protected&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#a2e5521e5f6f171fe369f8834e37dba80">_dbc_to_locator</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">protected&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#ae3a7bdd9e6c2d9eda1927e239d74addf">_get_dbc_meta</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">protected&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#a26d0d45e2a28d72e47e82ce693cf3d27">_hash_dba</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">protected&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#afdcfa544a971a80845c7947424a69273">_hash_dba_from_values</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">protected&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#a827cef7b7c1068abcefa575826e8d325">_intern_db_connections</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">protected&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#a59c537892239126ceedc8a951e526223">_invert_dba_hash</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">protected&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#aa2812ef6af35928285355e5791a3f92c">_load_registry_from_json</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">protected&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#ac49a845c8df4c1629fef71a5a8a174c2">_login_hash</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">protected&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#ad3c7dc6659087ab9c9686746a4521653">_query_multispecies_db</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">protected void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#ad0434605173ace845ee151b6bad07ff5">_register_dba</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">protected&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#a7d8f87ea6f820cdc85a9cef64f5cc527">_register_multispecies_core</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">protected&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#a1c99d86b9a020fece52506728ca5ec29">_register_multispecies_x</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">protected&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#a6087a191688596a0169895507c2e1948">_register_singlespecies_core</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">protected Arrayref&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#adc44c74c3a2ec3608636b722a7039548">_registry_to_hash</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">protected&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#aa23978416bc0e7ab0ad0f06e46858c84">_registry_to_json</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">protected&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#ac3ffd3a55a3881567d6812feb36fb1ac">_runtime_include</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public File&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#aee125b8711d27105f9ee47f9d4f13f6f">cache_file</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#a27ba13e5e557660cb2cbd7b046175ce0">clear_cache</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public Arrayref&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#abec0fe00c367b83a3f60014c7eaf4f68">dba_to_args</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public Arrayref&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#a7f90bc111e5b9ee167c0853ef7298e0a">get_all</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public Arrayref&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#ab5d859c22be7afc9ef9444d618d7bd4f">get_all_accessions</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public Arrayref&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#a8775d77a2d02b201dcc52ac0d42e7f8f">get_all_assemblies</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public Arrayref&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#a4118bf6e1922602c1f296bed76e4dddf">get_all_by_accession</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public Arrayref&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#aa51ea23e88d57638d80daddb9b425618">get_all_by_dbname</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public Arrayref&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#a0d19a031f2228d203741fb04ba9ba931">get_all_by_name_pattern</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#a9e6aab80a79229eefdab5395ca7d56e3">get_all_by_taxon_branch</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public Arrayref&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#a1cb07f5441b9b25ea8ffe85b93f7ac1c">get_all_by_taxon_id</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public Arrayref&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#ac78e43c2af6f50038c6ced78ce345855">get_all_DBConnections</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public Arrayref&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#aa6033f7cc60294138811c3c611e884fa">get_all_dbnames</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public Arrayref&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#ace7351dd3762ae8b47055a3ec875a994">get_all_names</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public Arrayref&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#ab3bcc587a34d213de61c101fa56574ce">get_all_taxon_ids</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public Arrayref&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#ab19b87fe6efb3a24087f9da2776603e1">get_all_versioned_accessions</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public Arrayref&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#a5c7d5c135fedb671a2abf8db8f92630b">get_all_versioned_assemblies</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public <br class="typebreak"/>
Bio::EnsEMBL::DBSQL::DatabaseAdaptor&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#ad8b2a99f0bcc7d7c03d30159526577f7">get_by_assembly_accession</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public Arrayref&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#a8e4371b3e5c7129d9cf277e294cc0a5e">get_by_name_exact</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#a0b69cc4af6ad4a2ec86e8d0f21399d7a">load_registry_from_file</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#a74356e09c3243bcbab5121c24c26eee6">load_registry_from_url</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#ab78380bb6a3ec6c927925f07b4079964">new</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#ae9a05fa751b5559b883a114392f31ad9">register_all_dbs</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public Registry&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#a6e44afef58e07ac928c5ee914a06978b">registry</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public <br class="typebreak"/>
Bio::EnsEMBL::Taxonomy::DBSQL::DBAdaptor&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#a41a04d896570e072c58955bc7849a0f5">taxonomy_adaptor</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#a6e048fa6ac0febfc23051767c9beea83">update_from_registry</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">public void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#aa4c72f3de0b7bef96ba8f8d8cf862f44">write_registry_to_file</a> ()</td></tr>
</table>
<hr/><h2>Method Documentation</h2>
<a class="anchor" id="ac5135d70a780c28ea235e9ff54468b52"></a><!-- doxytag: member="Bio::EnsEMBL::LookUp::LocalLookUp::_add_aliases" ref="ac5135d70a780c28ea235e9ff54468b52" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">protected Bio::EnsEMBL::LookUp::LocalLookUp::_add_aliases </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>	Description : Registry all aliases
	Arg	: Species name
	Arg	: Arrayref of alias strings
 </pre><div id="codesection-_add_aliases" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
	<img id='codesection-_add_aliases-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-_add_aliases-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-_add_aliases-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><pre class="fragment">sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#ac5135d70a780c28ea235e9ff54468b52">_add_aliases</a> {
  my ( $species_name, $alias_ref ) = @_;
  <span class="keywordflow">if</span> ( defined $alias_ref ) {
    <span class="keywordflow">if</span> ( ref($alias_ref) ne <span class="stringliteral">&#39;ARRAY&#39;</span> ) {
      $alias_ref = [$alias_ref];
    }

    <span class="keywordflow">if</span> ( scalar( @{$alias_ref} ) &gt; 0 ) {
      Bio::EnsEMBL::Utils::ConfigRegistry-&gt;add_alias(
                                              -species =&gt; $species_name,
                                              -alias   =&gt; $alias_ref );
    }
  }
  <span class="keywordflow">return</span>;
}
</pre></div> </div> 
</div>
</div>
<a class="anchor" id="ac1905013637d49ee18e9d1bc431c192f"></a><!-- doxytag: member="Bio::EnsEMBL::LookUp::LocalLookUp::_check_name" ref="ac1905013637d49ee18e9d1bc431c192f" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">protected Bio::EnsEMBL::LookUp::LocalLookUp::_check_name </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>	Description : Check that the name is not longer than 64 characters
	Arg	: Name to check
 </pre><div id="codesection-_check_name" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
	<img id='codesection-_check_name-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-_check_name-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-_check_name-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><pre class="fragment">sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#ac1905013637d49ee18e9d1bc431c192f">_check_name</a> {
<span class="preprocessor">  #Throws a wobbly if the db name is longer than 64 characters</span>
<span class="preprocessor"></span>  my ($name) = @_;
  my $length = length($name);
  <span class="keywordflow">throw</span>(
<span class="stringliteral">&quot;Invalid length for database name used. Max is 64. The name ${name}- was ${length}&quot;</span>
  ) <span class="keywordflow">if</span> $length &gt; 64;
  <span class="keywordflow">return</span>;
}
</pre></div> </div> 
</div>
</div>
<a class="anchor" id="aac5ffdeaa984aa8205f8a094e05628ef"></a><!-- doxytag: member="Bio::EnsEMBL::LookUp::LocalLookUp::_dba_id" ref="aac5ffdeaa984aa8205f8a094e05628ef" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">protected Bio::EnsEMBL::LookUp::LocalLookUp::_dba_id </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented method</p>
<div id="codesection-_dba_id" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
	<img id='codesection-_dba_id-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-_dba_id-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-_dba_id-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><pre class="fragment">sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#aac5ffdeaa984aa8205f8a094e05628ef">_dba_id</a> {
  my ( $self, $dba ) = @_;
  <span class="keywordflow">return</span> $dba-&gt;dbc()-&gt;dbname() . <span class="charliteral">&#39;/&#39;</span> . $dba-&gt;species_id();
}
</pre></div> </div> 
</div>
</div>
<a class="anchor" id="a33750117ab1c474dd86ac60ffd7a0746"></a><!-- doxytag: member="Bio::EnsEMBL::LookUp::LocalLookUp::_dba_to_locator" ref="a33750117ab1c474dd86ac60ffd7a0746" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">protected Bio::EnsEMBL::LookUp::LocalLookUp::_dba_to_locator </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>	Description : return a hash key for a DBAdaptor
	Arg	: Bio::EnsEMBL::DBAdaptor
 </pre><div id="codesection-_dba_to_locator" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
	<img id='codesection-_dba_to_locator-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-_dba_to_locator-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-_dba_to_locator-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><pre class="fragment">sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#a33750117ab1c474dd86ac60ffd7a0746">_dba_to_locator</a> {
  my ($dba) = @_;
  confess(
    <span class="stringliteral">&quot;Arg must be Bio::EnsEMBL::DBSQL::DBAdaptor not &quot;</span> . ref($dba) )
    unless ref($dba) eq &quot;Bio::EnsEMBL::DBSQL::DBAdaptor&quot;;
  my $locator =
    join( q{!-!}, $dba-&gt;species_id(), <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#a2e5521e5f6f171fe369f8834e37dba80">_dbc_to_locator</a>( $dba-&gt;dbc() ) );
  <span class="keywordflow">return</span> $locator;
}
</pre></div> </div> 
</div>
</div>
<a class="anchor" id="a2e5521e5f6f171fe369f8834e37dba80"></a><!-- doxytag: member="Bio::EnsEMBL::LookUp::LocalLookUp::_dbc_to_locator" ref="a2e5521e5f6f171fe369f8834e37dba80" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">protected Bio::EnsEMBL::LookUp::LocalLookUp::_dbc_to_locator </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>	Description : return a hash key for a DBConnection
	Arg	: Bio::EnsEMBL::DBConnection
 </pre><div id="codesection-_dbc_to_locator" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
	<img id='codesection-_dbc_to_locator-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-_dbc_to_locator-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-_dbc_to_locator-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><pre class="fragment">sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#a2e5521e5f6f171fe369f8834e37dba80">_dbc_to_locator</a> {
  my ($dbc) = @_;
  my $locator = join( q{!-!},
                      $dbc-&gt;host(),   $dbc-&gt;dbname(),
                      $dbc-&gt;driver(), $dbc-&gt;port(),
                      $dbc-&gt;username() );
  <span class="keywordflow">return</span> $locator;
}
</pre></div> </div> 
</div>
</div>
<a class="anchor" id="ae3a7bdd9e6c2d9eda1927e239d74addf"></a><!-- doxytag: member="Bio::EnsEMBL::LookUp::LocalLookUp::_get_dbc_meta" ref="ae3a7bdd9e6c2d9eda1927e239d74addf" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">protected Bio::EnsEMBL::LookUp::LocalLookUp::_get_dbc_meta </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented method</p>
<div id="codesection-_get_dbc_meta" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
	<img id='codesection-_get_dbc_meta-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-_get_dbc_meta-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-_get_dbc_meta-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><pre class="fragment">sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#ae3a7bdd9e6c2d9eda1927e239d74addf">_get_dbc_meta</a> {
  my ( $self, $dbc ) = @_;
  my $name = $dbc-&gt;dbname();
  <span class="keywordflow">if</span> ( !defined $self-&gt;{dbc_meta}{$name} ) {
<span class="preprocessor">    # load metadata in batch for the whole database</span>
<span class="preprocessor"></span>    $self-&gt;{dbc_meta}{$name} = {};
<span class="preprocessor">    # taxid</span>
<span class="preprocessor"></span>
    $dbc-&gt;sql_helper()-&gt;execute(
      -SQL =&gt;
q/select species_id,meta_value from meta where meta_key=<span class="stringliteral">&#39;species.taxonomy_id&#39;</span>/,
      -PARAMS   =&gt; [],
      -CALLBACK =&gt; sub {
        my $row = shift @_;
        $self-&gt;{dbc_meta}{$name}{ $row-&gt;[0] }{taxid} = $row-&gt;[1];
      } );
<span class="preprocessor">    # aliases</span>
<span class="preprocessor"></span>    $dbc-&gt;sql_helper()-&gt;execute(
      -SQL =&gt;
<span class="stringliteral">&#39;select species_id,meta_value from meta where meta_key=\&#39;species.alias\&#39;&#39;</span>,
      -PARAMS   =&gt; [],
      -CALLBACK =&gt; sub {
        my @row = @{ shift @_ };
        push @{ $self-&gt;{dbc_meta}{$name}{ $row[0] }{aliases} }, $row[1];
      } );
<span class="preprocessor">    # assembly.accession</span>
<span class="preprocessor"></span>    $dbc-&gt;sql_helper()-&gt;execute(
      -SQL =&gt;
<span class="stringliteral">&#39;select species_id,meta_value from meta where meta_key=\&#39;assembly.accession\&#39;&#39;</span>,
      -PARAMS   =&gt; [],
      -CALLBACK =&gt; sub {
        my @row = @{ shift @_ };
        $self-&gt;{dbc_meta}{$name}{ $row[0] }{assembly_accession} =
          $row[1];
      } );

        <span class="keywordflow">if</span>(!defined $self-&gt;{skip_contigs}) {
<span class="preprocessor">    # seq_region_names and synonyms</span>
<span class="preprocessor"></span>    $dbc-&gt;sql_helper()-&gt;execute(
      -SQL =&gt;
        q/select cs.species_id,sr.name,ss.synonym from coord_system cs 
      join seq_region sr using (coord_system_id) 
      left join seq_region_synonym ss <span class="keyword">using</span> (seq_region_id)/,
      -PARAMS   =&gt; [],
      -CALLBACK =&gt; sub {
        my @row = @{ shift @_ };
        push @{ $self-&gt;{dbc_meta}{$name}{ $row[0] }{accessions} },
          $row[1];
        <span class="keywordflow">if</span> ( defined $row[2] ) {
          push @{ $self-&gt;{dbc_meta}{$name}{ $row[0] }{accessions} },
            $row[2];
        }
      } );
        }
  } ## end <span class="keywordflow">if</span> ( !defined $self-&gt;{...})
  <span class="keywordflow">return</span> $self-&gt;{dbc_meta}{$name};
} ## end sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#ae3a7bdd9e6c2d9eda1927e239d74addf">_get_dbc_meta</a>
</pre></div> </div> 
</div>
</div>
<a class="anchor" id="a26d0d45e2a28d72e47e82ce693cf3d27"></a><!-- doxytag: member="Bio::EnsEMBL::LookUp::LocalLookUp::_hash_dba" ref="a26d0d45e2a28d72e47e82ce693cf3d27" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">protected Bio::EnsEMBL::LookUp::LocalLookUp::_hash_dba </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>	Description : Add details from a DBAdaptor to the internal hashes of details
	Arg	: Bio::EnsEMBL::DBAdaptor
	Arg 	: (optional) If set to 1, do not update from a DBAdaptor if already processed (allows updates of an existing <a class="el" href="classBio_1_1EnsEMBL_1_1LookUp.html">LookUp</a> instance)
 </pre><div id="codesection-_hash_dba" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
	<img id='codesection-_hash_dba-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-_hash_dba-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-_hash_dba-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><pre class="fragment">sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#a26d0d45e2a28d72e47e82ce693cf3d27">_hash_dba</a> {
  my ( $self, $dba, $update_only ) = @_;
  my $nom = $self-&gt;_dba_id($dba);
  <span class="keywordflow">if</span> ( !defined $update_only || !defined $self-&gt;{dbas}{$nom} ) {
    my $dbc_meta = $self-&gt;_get_dbc_meta( $dba-&gt;dbc() );
    my $dba_meta = $dbc_meta-&gt;{ $dba-&gt;species_id() };
    $self-&gt;_hash_dba_from_values( $dba,
                                  [ $dba_meta-&gt;{taxid} ],
                                  $dba_meta-&gt;{aliases},
                                  $dba_meta-&gt;{accessions},
                                  $dba_meta-&gt;{assembly_accession} );
  }
  <span class="keywordflow">return</span>;
}
</pre></div> </div> 
</div>
</div>
<a class="anchor" id="afdcfa544a971a80845c7947424a69273"></a><!-- doxytag: member="Bio::EnsEMBL::LookUp::LocalLookUp::_hash_dba_from_values" ref="afdcfa544a971a80845c7947424a69273" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">protected Bio::EnsEMBL::LookUp::LocalLookUp::_hash_dba_from_values </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>	Description : Add supplied details to the internal hashes of details
	Arg	: Bio::EnsEMBL::DBAdaptor to hash
	Arg	: Arrayref of taxonomy IDs to use as keys
	Arg	: Arrayref of aliases to use as keys
	Arg	: Arrayref of ENA accessions to use as keys
 </pre><div id="codesection-_hash_dba_from_values" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
	<img id='codesection-_hash_dba_from_values-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-_hash_dba_from_values-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-_hash_dba_from_values-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><pre class="fragment">sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#afdcfa544a971a80845c7947424a69273">_hash_dba_from_values</a> {
  my ( $self, $dba, $taxids, $aliases, $accessions, $vgc ) = @_;

  <span class="keywordflow">for</span> my $taxid ( @{$taxids} ) {
    <span class="keywordflow">if</span> ( defined $taxid ) {
      push @{ $self-&gt;{dbas_by_taxid}{$taxid} }, $dba;
    }
  }
  <span class="keywordflow">for</span> my $name ( <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp.html#a555cb63ba0611127ed3c0742756e0346">uniq</a>( @{$aliases} ) ) {
    push @{ $self-&gt;{dbas_by_name}{$name} }, $dba;
  }
  <span class="keywordflow">for</span> my $acc ( <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp.html#a555cb63ba0611127ed3c0742756e0346">uniq</a>( @{$accessions} ) ) {
    push @{ $self-&gt;{dbas_by_vacc}{$acc} }, $dba;
    $acc =~ s/\.[0-9]+$<span class="comment">//x;</span>
    push @{ $self-&gt;{dbas_by_acc}{$acc} }, $dba;
  }
  <span class="keywordflow">if</span> ( defined $vgc ) {
    <span class="keywordflow">if</span> ( defined $self-&gt;{dbas_by_vgc}{$vgc} ) {
      croak <span class="stringliteral">&quot;DBA with GC accession $vgc already registered&quot;</span>;
    }
    $self-&gt;{dbas_by_vgc}{$vgc} = $dba;
    $vgc =~ s/\.[0-9]+$<span class="comment">//x;</span>
    <span class="keywordflow">if</span> ( defined $self-&gt;{dbas_by_gc}{$vgc} ) {
      croak <span class="stringliteral">&quot;DBA with GC set chain $vgc already registered&quot;</span>;
    }
    $self-&gt;{dbas_by_gc}{$vgc} = $dba;
  }
  $self-&gt;{dbas}{ $self-&gt;_dba_id($dba) } = $dba;
  <span class="keywordflow">return</span>;
} ## end sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#afdcfa544a971a80845c7947424a69273">_hash_dba_from_values</a>
</pre></div> </div> 
</div>
</div>
<a class="anchor" id="a827cef7b7c1068abcefa575826e8d325"></a><!-- doxytag: member="Bio::EnsEMBL::LookUp::LocalLookUp::_intern_db_connections" ref="a827cef7b7c1068abcefa575826e8d325" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">protected Bio::EnsEMBL::LookUp::LocalLookUp::_intern_db_connections </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>  Description : Go through all available DBAdaptors of registry and ensure they use the same
                DBConnection instance.
  Exceptions  : None
  Status      : At Risk
 </pre><div id="codesection-_intern_db_connections" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
	<img id='codesection-_intern_db_connections-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-_intern_db_connections-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-_intern_db_connections-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><pre class="fragment">sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#a827cef7b7c1068abcefa575826e8d325">_intern_db_connections</a> {
  my ($self) = @_;
  my $adaptors = $self-&gt;registry()-&gt;get_all_DBAdaptors();
  my %dbc_intern;
  <span class="keywordflow">foreach</span> my $dba ( @{$adaptors} ) {
    my $dbc     = $dba-&gt;dbc();
    my $locator = <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#a2e5521e5f6f171fe369f8834e37dba80">_dbc_to_locator</a>($dbc);
    <span class="keywordflow">if</span> ( exists $dbc_intern{$locator} ) {
      $dba-&gt;dbc( $dbc_intern{$locator} );
    }
    <span class="keywordflow">else</span> {
      $dbc_intern{$locator} = $dba-&gt;dbc();
    }
  }
  <span class="keywordflow">return</span>;
}
</pre></div> </div> 
</div>
</div>
<a class="anchor" id="a59c537892239126ceedc8a951e526223"></a><!-- doxytag: member="Bio::EnsEMBL::LookUp::LocalLookUp::_invert_dba_hash" ref="a59c537892239126ceedc8a951e526223" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">protected Bio::EnsEMBL::LookUp::LocalLookUp::_invert_dba_hash </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented method</p>
<div id="codesection-_invert_dba_hash" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
	<img id='codesection-_invert_dba_hash-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-_invert_dba_hash-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-_invert_dba_hash-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><pre class="fragment">sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#a59c537892239126ceedc8a951e526223">_invert_dba_hash</a> {
  my ($hash) = @_;
  my $inv_hash;
  <span class="keywordflow">while</span> ( my ( $item, $dbas ) = each( %{$hash} ) ) {
    <span class="keywordflow">if</span> ( ref $dbas ne <span class="stringliteral">&#39;ARRAY&#39;</span> ) {
      $dbas = [$dbas];
    }
    <span class="keywordflow">for</span> my $dba ( @{$dbas} ) {
      my $dba_loc = <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#a33750117ab1c474dd86ac60ffd7a0746">_dba_to_locator</a>($dba);
      push @{ $inv_hash-&gt;{$dba_loc} }, $item;
    }
  }
  <span class="keywordflow">return</span> $inv_hash;
}
</pre></div> </div> 
</div>
</div>
<a class="anchor" id="aa2812ef6af35928285355e5791a3f92c"></a><!-- doxytag: member="Bio::EnsEMBL::LookUp::LocalLookUp::_load_registry_from_json" ref="aa2812ef6af35928285355e5791a3f92c" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">protected Bio::EnsEMBL::LookUp::LocalLookUp::_load_registry_from_json </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>	Description	: load the registry from the supplied JSON string
	Arg	: JSON string
 </pre><div id="codesection-_load_registry_from_json" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
	<img id='codesection-_load_registry_from_json-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-_load_registry_from_json-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-_load_registry_from_json-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><pre class="fragment">sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#aa2812ef6af35928285355e5791a3f92c">_load_registry_from_json</a> {
  my ( $self, $json ) = @_;
  my $reg_arr = decode_json($json);
  <span class="keywordflow">for</span> my $dbc_h ( @{$reg_arr} ) {
    my $dbc =
      Bio::EnsEMBL::DBSQL::DBConnection-&gt;new(
                                            -driver =&gt; $dbc_h-&gt;{driver},
                                            -host   =&gt; $dbc_h-&gt;{host},
                                            -port   =&gt; $dbc_h-&gt;{port},
                                            -user =&gt; $dbc_h-&gt;{username},
                                            -pass =&gt; $dbc_h-&gt;{password},
                                            -dbname =&gt; $dbc_h-&gt;{dbname}
      );
    <span class="keywordflow">for</span> my $species ( @{ $dbc_h-&gt;{species} } ) {
      my $dba =
        Bio::EnsEMBL::DBSQL::DBAdaptor-&gt;new(
                                  -DBCONN     =&gt; $dbc,
                                  -species    =&gt; $species-&gt;{species},
                                  -species_id =&gt; $species-&gt;{species_id},
                                  -multispecies_db =&gt; 1,
                                  -group           =&gt; <span class="stringliteral">&#39;core&#39;</span>, );
<span class="preprocessor">      # no need to register - found automagically</span>
<span class="preprocessor"></span>      my $gc = $species-&gt;{gc};
      <span class="keywordflow">if</span> ( ref $gc eq <span class="stringliteral">&#39;ARRAY&#39;</span> ) { $gc = $gc-&gt;[0]; }
      $self-&gt;_hash_dba_from_values( $dba,
                                    $species-&gt;{taxids},
                                    $species-&gt;{aliases},
                                    $species-&gt;{accessions},
                                    $species-&gt;{gc} );
    }
  } ## end <span class="keywordflow">for</span> my $dbc_h ( @{$reg_arr...})
  $self-&gt;_intern_db_connections();
  <span class="keywordflow">return</span>;
} ## end sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#aa2812ef6af35928285355e5791a3f92c">_load_registry_from_json</a>
</pre></div> </div> 
</div>
</div>
<a class="anchor" id="ac49a845c8df4c1629fef71a5a8a174c2"></a><!-- doxytag: member="Bio::EnsEMBL::LookUp::LocalLookUp::_login_hash" ref="ac49a845c8df4c1629fef71a5a8a174c2" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">protected Bio::EnsEMBL::LookUp::LocalLookUp::_login_hash </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>	Description : Generate dbadaptor login hash from supplied Args
	Arg	: Host
	Arg	: Port
	Arg	: User
	Arg	: Password
 </pre><div id="codesection-_login_hash" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
	<img id='codesection-_login_hash-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-_login_hash-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-_login_hash-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><pre class="fragment">sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#ac49a845c8df4c1629fef71a5a8a174c2">_login_hash</a> {
  my ( $host, $port, $user, $pass ) = @_;
  my %details = ( -HOST =&gt; $host, -PORT =&gt; $port, -USER =&gt; $user );
  $details{-PASS} = $pass <span class="keywordflow">if</span> defined $pass;
  <span class="keywordflow">return</span> %details;
}
</pre></div> </div> 
</div>
</div>
<a class="anchor" id="ad3c7dc6659087ab9c9686746a4521653"></a><!-- doxytag: member="Bio::EnsEMBL::LookUp::LocalLookUp::_query_multispecies_db" ref="ad3c7dc6659087ab9c9686746a4521653" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">protected Bio::EnsEMBL::LookUp::LocalLookUp::_query_multispecies_db </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>	Description : Find all species in the multispecies database
 </pre><div id="codesection-_query_multispecies_db" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
	<img id='codesection-_query_multispecies_db-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-_query_multispecies_db-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-_query_multispecies_db-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><pre class="fragment">sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#ad3c7dc6659087ab9c9686746a4521653">_query_multispecies_db</a> {
  my ( $species, %db_args ) = @_;
  my @species_array;
  eval {
    my $dbh = Bio::EnsEMBL::DBSQL::DBConnection-&gt;new(%db_args);
    my $sql;
    my @params = (<span class="stringliteral">&#39;species.db_name&#39;</span>);

    <span class="keywordflow">if</span> ( defined $species ) {
      $sql =
<span class="stringliteral">&#39;select meta_value, species_id from meta where meta_key =? and meta_value =?&#39;</span>;
      push( @params, $species );
    }
    <span class="keywordflow">else</span> {
      $sql =
<span class="stringliteral">&#39;select distinct meta_value, species_id from meta where meta_key =? and species_id is not null&#39;</span>;
    }
    my $sth = $dbh-&gt;prepare($sql);
    $sth-&gt;execute(@params);
    <span class="keywordflow">while</span> ( my $row = $sth-&gt;fetchrow_arrayref() ) {
      my ( $species_name, $species_id ) = @{$row};
      push( @species_array,
            { <span class="stringliteral">&#39;-SPECIES&#39;</span>    =&gt; $species_name,
              <span class="stringliteral">&#39;-SPECIES_ID&#39;</span> =&gt; $species_id } );
    }
    $sth-&gt;finish();
  };
  <span class="keywordflow">throw</span>(<span class="stringliteral">&quot;Error detected: $@&quot;</span>) <span class="keywordflow">if</span> $@;
  <span class="keywordflow">return</span> \@species_array;
} ## end sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#ad3c7dc6659087ab9c9686746a4521653">_query_multispecies_db</a>
</pre></div> </div> 
</div>
</div>
<a class="anchor" id="ad0434605173ace845ee151b6bad07ff5"></a><!-- doxytag: member="Bio::EnsEMBL::LookUp::LocalLookUp::_register_dba" ref="ad0434605173ace845ee151b6bad07ff5" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">protected void Bio::EnsEMBL::LookUp::LocalLookUp::_register_dba </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>	Description	: Add a single DBAdaptor to the registry and the internal hashes of details
	Arg	: Bio::EnsEMBL::DBSQL::DBAdaptor
	Return		: None
 </pre><div id="codesection-_register_dba" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
	<img id='codesection-_register_dba-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-_register_dba-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-_register_dba-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><pre class="fragment">sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#ad0434605173ace845ee151b6bad07ff5">_register_dba</a> {
  my ( $self, $species, $dba ) = @_;
  $self-&gt;registry()-&gt;add_DBAdaptor( $species, <span class="stringliteral">&quot;core&quot;</span>, $dba );
  $self-&gt;_hash_dba($dba);
  <span class="keywordflow">return</span>;
}
</pre></div> </div> 
</div>
</div>
<a class="anchor" id="a7d8f87ea6f820cdc85a9cef64f5cc527"></a><!-- doxytag: member="Bio::EnsEMBL::LookUp::LocalLookUp::_register_multispecies_core" ref="a7d8f87ea6f820cdc85a9cef64f5cc527" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">protected Bio::EnsEMBL::LookUp::LocalLookUp::_register_multispecies_core </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>	Description : Register core dbas for all species in the supplied database
 </pre><div id="codesection-_register_multispecies_core" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
	<img id='codesection-_register_multispecies_core-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-_register_multispecies_core-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-_register_multispecies_core-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><pre class="fragment">sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#a7d8f87ea6f820cdc85a9cef64f5cc527">_register_multispecies_core</a> {
  <span class="keywordflow">return</span> <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#a1c99d86b9a020fece52506728ca5ec29">_register_multispecies_x</a>(
    <span class="stringliteral">&#39;Bio::EnsEMBL::DBSQL::DBAdaptor&#39;</span>,
    sub {
</pre></div> </div> 
</div>
</div>
<a class="anchor" id="a1c99d86b9a020fece52506728ca5ec29"></a><!-- doxytag: member="Bio::EnsEMBL::LookUp::LocalLookUp::_register_multispecies_x" ref="a1c99d86b9a020fece52506728ca5ec29" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">protected Bio::EnsEMBL::LookUp::LocalLookUp::_register_multispecies_x </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>	Description : Register specified dba type for all species in the supplied database
 </pre><div id="codesection-_register_multispecies_x" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
	<img id='codesection-_register_multispecies_x-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-_register_multispecies_x-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-_register_multispecies_x-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><pre class="fragment">sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#a1c99d86b9a020fece52506728ca5ec29">_register_multispecies_x</a> {

  my ( $adaptor, $closure, $host, $port, $user, $pass, $instance,
       $species, $alias_arr_ref, $disconnect_when_idle )
    = @_;
  <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#ac3ffd3a55a3881567d6812feb36fb1ac">_runtime_include</a>($adaptor);
  <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#ac1905013637d49ee18e9d1bc431c192f">_check_name</a>($instance);
  my %args =
    ( <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#ac49a845c8df4c1629fef71a5a8a174c2">_login_hash</a>( $host, $port, $user, $pass ), <span class="stringliteral">&#39;-DBNAME&#39;</span>, $instance );
  my @species_array = @{ <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#ad3c7dc6659087ab9c9686746a4521653">_query_multispecies_db</a>( $species, %args ) };
  my @dbas;
  <span class="keywordflow">foreach</span> my $species_args (@species_array) {
    my %new_args = ( %args, %{$species_args}, <span class="stringliteral">&#39;-MULTISPECIES_DB&#39;</span> =&gt; 1 );
    $new_args{-DISCONNECT_WHEN_INACTIVE} = 1 <span class="keywordflow">if</span> $disconnect_when_idle;
    my $dba = $closure-&gt;(%new_args);
    <span class="keywordflow">if</span> ( defined $species &amp;&amp; defined $alias_arr_ref ) {
      <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#ac5135d70a780c28ea235e9ff54468b52">_add_aliases</a>( $species, $alias_arr_ref );
    }
    push( @dbas, $dba );
  }
  <span class="keywordflow">return</span> \@dbas;
}
</pre></div> </div> 
</div>
</div>
<a class="anchor" id="a6087a191688596a0169895507c2e1948"></a><!-- doxytag: member="Bio::EnsEMBL::LookUp::LocalLookUp::_register_singlespecies_core" ref="a6087a191688596a0169895507c2e1948" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">protected Bio::EnsEMBL::LookUp::LocalLookUp::_register_singlespecies_core </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>	Description : Register core dbas for all species in the supplied database
 </pre><div id="codesection-_register_singlespecies_core" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
	<img id='codesection-_register_singlespecies_core-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-_register_singlespecies_core-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-_register_singlespecies_core-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><pre class="fragment">sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#a6087a191688596a0169895507c2e1948">_register_singlespecies_core</a> {
  my ( $host, $port, $user, $pass, $db ) = @_;
  my ( $species, $num ) = (
    $db =~ /(^[a-z]+_[a-z0-9]+(?:_[a-z0-9]+)?)  # species name
                     _
                     core                   # type
                     _
                     (?:\d+_)?               # optional endbit <span class="keywordflow">for</span> ensembl genomes
                     (\d+)                   <span class="preprocessor"># databases release</span>
<span class="preprocessor"></span>                     _
                      /x );
  <span class="keywordflow">return</span>
    Bio::EnsEMBL::DBSQL::DBAdaptor-&gt;new( -HOST    =&gt; $host,
                                         -PORT    =&gt; $port,
                                         -USER    =&gt; $user,
                                         -PASS    =&gt; $pass,
                                         -DBNAME  =&gt; $db,
                                         -SPECIES =&gt; $species );
}
</pre></div> </div> 
</div>
</div>
<a class="anchor" id="adc44c74c3a2ec3608636b722a7039548"></a><!-- doxytag: member="Bio::EnsEMBL::LookUp::LocalLookUp::_registry_to_hash" ref="adc44c74c3a2ec3608636b722a7039548" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">protected Arrayref Bio::EnsEMBL::LookUp::LocalLookUp::_registry_to_hash </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>	Description	: Generate a hash array structure for the current registry and species details for turning to JSON
	Returns		: Arrayref of hashes
 </pre><div id="codesection-_registry_to_hash" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
	<img id='codesection-_registry_to_hash-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-_registry_to_hash-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-_registry_to_hash-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><pre class="fragment">sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#adc44c74c3a2ec3608636b722a7039548">_registry_to_hash</a> {
  my ($self) = @_;
<span class="preprocessor">  # hash dbcs and dbas by locators</span>
<span class="preprocessor"></span>  my $dbc_hash;
  my $dba_hash;
  <span class="keywordflow">for</span> my $dba ( values %{ $self-&gt;{dbas} } ) {
    my $dbc_loc = <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#a2e5521e5f6f171fe369f8834e37dba80">_dbc_to_locator</a>( $dba-&gt;dbc() );
    $dbc_hash-&gt;{$dbc_loc} = $dba-&gt;dbc();
    push @{ $dba_hash-&gt;{$dbc_loc} }, $dba;
  }
<span class="preprocessor">  # create auxillary hashes</span>
<span class="preprocessor"></span>  my $acc_hash   = <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#a59c537892239126ceedc8a951e526223">_invert_dba_hash</a>( $self-&gt;{dbas_by_vacc} );
  my $name_hash  = <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#a59c537892239126ceedc8a951e526223">_invert_dba_hash</a>( $self-&gt;{dbas_by_name} );
  my $taxid_hash = <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#a59c537892239126ceedc8a951e526223">_invert_dba_hash</a>( $self-&gt;{dbas_by_taxid} );
  my $gc_hash    = <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#a59c537892239126ceedc8a951e526223">_invert_dba_hash</a>( $self-&gt;{dbas_by_vgc} );
<span class="preprocessor">  # create array of hashes</span>
<span class="preprocessor"></span>  my $out_arr;
  <span class="keywordflow">while</span> ( my ( $dbc_loc, $dbconn ) = each( %{$dbc_hash} ) ) {
    my $dbc_h = { driver   =&gt; $dbconn-&gt;driver(),
                  host     =&gt; $dbconn-&gt;host(),
                  port     =&gt; $dbconn-&gt;port(),
                  username =&gt; $dbconn-&gt;username(),
                  password =&gt; $dbconn-&gt;password(),
                  dbname   =&gt; $dbconn-&gt;dbname(),
                  species  =&gt; [] };
    <span class="keywordflow">for</span> my $dba ( @{ $dba_hash-&gt;{$dbc_loc} } ) {
      my $dba_loc = <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#a33750117ab1c474dd86ac60ffd7a0746">_dba_to_locator</a>($dba);
      my $gc      = $gc_hash-&gt;{$dba_loc};
      <span class="keywordflow">if</span> ( ref $gc eq <span class="stringliteral">&#39;ARRAY&#39;</span> ) {
        $gc = $gc-&gt;[0];
      }
      push @{ $dbc_h-&gt;{species} },
        { species_id =&gt; $dba-&gt;species_id(),
          species    =&gt; $dba-&gt;species(),
          taxids     =&gt; $taxid_hash-&gt;{$dba_loc},
          aliases    =&gt; $name_hash-&gt;{$dba_loc},
          accessions =&gt; $acc_hash-&gt;{$dba_loc},
          gc         =&gt; $gc };
    }
    push @{$out_arr}, $dbc_h;
  }
  <span class="keywordflow">return</span> $out_arr;
} ## end sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#adc44c74c3a2ec3608636b722a7039548">_registry_to_hash</a>
</pre></div> </div> 
</div>
</div>
<a class="anchor" id="aa23978416bc0e7ab0ad0f06e46858c84"></a><!-- doxytag: member="Bio::EnsEMBL::LookUp::LocalLookUp::_registry_to_json" ref="aa23978416bc0e7ab0ad0f06e46858c84" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">protected Bio::EnsEMBL::LookUp::LocalLookUp::_registry_to_json </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented method</p>
<div id="codesection-_registry_to_json" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
	<img id='codesection-_registry_to_json-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-_registry_to_json-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-_registry_to_json-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><pre class="fragment">sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#aa23978416bc0e7ab0ad0f06e46858c84">_registry_to_json</a> {
  my ($self) = @_;
  my $out_arr = $self-&gt;_registry_to_hash();
  my $json;
  <span class="keywordflow">if</span> ($out_arr) {
    $json = encode_json($out_arr);
  }
  <span class="keywordflow">else</span> {
    carp(<span class="stringliteral">&#39;No DBAs found&#39;</span>);
  }
  <span class="keywordflow">return</span> $json;
}
</pre></div> </div> 
</div>
</div>
<a class="anchor" id="ac3ffd3a55a3881567d6812feb36fb1ac"></a><!-- doxytag: member="Bio::EnsEMBL::LookUp::LocalLookUp::_runtime_include" ref="ac3ffd3a55a3881567d6812feb36fb1ac" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">protected Bio::EnsEMBL::LookUp::LocalLookUp::_runtime_include </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>	Description : Load the specified module (usually a DatabaseAdaptor)
	Arg 	: Module name
 </pre><div id="codesection-_runtime_include" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
	<img id='codesection-_runtime_include-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-_runtime_include-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-_runtime_include-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><pre class="fragment">sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#ac3ffd3a55a3881567d6812feb36fb1ac">_runtime_include</a> {
  my ($full_module) = @_;
<span class="preprocessor">  ## no critic (ProhibitStringyEval)</span>
<span class="preprocessor"></span>  eval <span class="stringliteral">&quot;use ${full_module}&quot;</span> ||
    <span class="keywordflow">throw</span>(<span class="stringliteral">&quot;Cannot import module &#39;${full_module}&#39;: $@&quot;</span>)
    <span class="keywordflow">if</span> $@;
<span class="preprocessor">  ## use critic</span>
<span class="preprocessor"></span>  <span class="keywordflow">return</span>;
}
</pre></div> </div> 
</div>
</div>
<a class="anchor" id="aee125b8711d27105f9ee47f9d4f13f6f"></a><!-- doxytag: member="Bio::EnsEMBL::LookUp::LocalLookUp::cache_file" ref="aee125b8711d27105f9ee47f9d4f13f6f" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public File Bio::EnsEMBL::LookUp::LocalLookUp::cache_file </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>  Arg [1]     : File to use for local caching
  Description : Sets and retrieves the local cache file 
  Returntype  : File name if set; otherwise undef
  Status      : Stable
 </pre><div id="codesection-cache_file" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
	<img id='codesection-cache_file-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-cache_file-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-cache_file-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><pre class="fragment">sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#aee125b8711d27105f9ee47f9d4f13f6f">cache_file</a> {
  my ( $self, $cache_file ) = @_;
  <span class="keywordflow">if</span> ( defined $cache_file ) {
    $self-&gt;{<a class="code" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#aee125b8711d27105f9ee47f9d4f13f6f">cache_file</a>} = $cache_file;
  }
  <span class="keywordflow">return</span> $self-&gt;{<a class="code" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#aee125b8711d27105f9ee47f9d4f13f6f">cache_file</a>};
}
</pre></div> </div> 
</div>
</div>
<a class="anchor" id="a27ba13e5e557660cb2cbd7b046175ce0"></a><!-- doxytag: member="Bio::EnsEMBL::LookUp::LocalLookUp::clear_cache" ref="a27ba13e5e557660cb2cbd7b046175ce0" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Bio::EnsEMBL::LookUp::LocalLookUp::clear_cache </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented method</p>
<div id="codesection-clear_cache" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
	<img id='codesection-clear_cache-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-clear_cache-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-clear_cache-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><pre class="fragment">sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#a27ba13e5e557660cb2cbd7b046175ce0">clear_cache</a> {
  my ($self) = @_;
  <span class="keywordflow">if</span> ( defined $self-&gt;cache_file() &amp;&amp; -e $self-&gt;cache_file() ) {
    unlink $self-&gt;cache_file();
  }
  <span class="keywordflow">return</span>;
}
</pre></div> </div> 
</div>
</div>
<a class="anchor" id="abec0fe00c367b83a3f60014c7eaf4f68"></a><!-- doxytag: member="Bio::EnsEMBL::LookUp::LocalLookUp::dba_to_args" ref="abec0fe00c367b83a3f60014c7eaf4f68" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Arrayref Bio::EnsEMBL::LookUp::LocalLookUp::dba_to_args </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>	Description	: Dump the Args needed for contructing a DBA
	Arg	: Bio::EnsEMBL::DBAdaptor
	Return		: Arrayref of args
 </pre><div id="codesection-dba_to_args" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
	<img id='codesection-dba_to_args-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-dba_to_args-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-dba_to_args-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><pre class="fragment">sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#abec0fe00c367b83a3f60014c7eaf4f68">dba_to_args</a> {
  my ( $self, $dba ) = @_;
  my $dbc = $dba-&gt;dbc();
  my $args = [ -species         =&gt; $dba-&gt;species(),
               -multispecies_db =&gt; $dba-&gt;is_multispecies(),
               -species_id      =&gt; $dba-&gt;species_id(),
               -group           =&gt; $dba-&gt;group(),
               -host            =&gt; $dbc-&gt;host(),
               -port            =&gt; $dbc-&gt;port(),
               -user            =&gt; $dbc-&gt;username(),
               -pass            =&gt; $dbc-&gt;password(),
               -driver          =&gt; $dbc-&gt;driver(),
               -dbname          =&gt; $dbc-&gt;dbname() ];
  <span class="keywordflow">return</span> $args;
}
</pre></div> </div> 
</div>
</div>
<a class="anchor" id="a7f90bc111e5b9ee167c0853ef7298e0a"></a><!-- doxytag: member="Bio::EnsEMBL::LookUp::LocalLookUp::get_all" ref="a7f90bc111e5b9ee167c0853ef7298e0a" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Arrayref Bio::EnsEMBL::LookUp::LocalLookUp::get_all </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>	Description : Return all database adaptors that have been retrieved from registry
	Arg    : None
	Exceptions  : None
	Return type : Arrayref of Bio::EnsEMBL::DBSQL::DatabaseAdaptor
 </pre><div id="codesection-get_all" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
	<img id='codesection-get_all-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-get_all-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-get_all-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><pre class="fragment">sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#a7f90bc111e5b9ee167c0853ef7298e0a">get_all</a> {
  my ($self) = @_;
  <span class="keywordflow">return</span> [ values %{ $self-&gt;{dbas} } ];
}
</pre></div> </div> 
</div>
</div>
<a class="anchor" id="ab5d859c22be7afc9ef9444d618d7bd4f"></a><!-- doxytag: member="Bio::EnsEMBL::LookUp::LocalLookUp::get_all_accessions" ref="ab5d859c22be7afc9ef9444d618d7bd4f" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Arrayref Bio::EnsEMBL::LookUp::LocalLookUp::get_all_accessions </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>	Description : Return list of all INSDC sequence accessions (or other seq_region names) registered with the helper
	Exceptions  : None
	Return type : Arrayref of strings
 </pre><div id="codesection-get_all_accessions" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
	<img id='codesection-get_all_accessions-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-get_all_accessions-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-get_all_accessions-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><pre class="fragment">sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#ab5d859c22be7afc9ef9444d618d7bd4f">get_all_accessions</a> {
  my ($self) = @_;
  <span class="keywordflow">return</span> [ keys( %{ $self-&gt;{dbas_by_acc} } ) ];
}
</pre></div> </div> 
</div>
</div>
<a class="anchor" id="a8775d77a2d02b201dcc52ac0d42e7f8f"></a><!-- doxytag: member="Bio::EnsEMBL::LookUp::LocalLookUp::get_all_assemblies" ref="a8775d77a2d02b201dcc52ac0d42e7f8f" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Arrayref Bio::EnsEMBL::LookUp::LocalLookUp::get_all_assemblies </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>	Description : Return list of all INSDC assembly accessions registered with the helper
	Exceptions  : None
	Return type : Arrayref of strings
 </pre><div id="codesection-get_all_assemblies" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
	<img id='codesection-get_all_assemblies-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-get_all_assemblies-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-get_all_assemblies-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><pre class="fragment">sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#a8775d77a2d02b201dcc52ac0d42e7f8f">get_all_assemblies</a> {
  my ($self) = @_;
  <span class="keywordflow">return</span> [ keys( %{ $self-&gt;{dbas_by_gc} } ) ];
}
</pre></div> </div> 
</div>
</div>
<a class="anchor" id="a4118bf6e1922602c1f296bed76e4dddf"></a><!-- doxytag: member="Bio::EnsEMBL::LookUp::LocalLookUp::get_all_by_accession" ref="a4118bf6e1922602c1f296bed76e4dddf" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Arrayref Bio::EnsEMBL::LookUp::LocalLookUp::get_all_by_accession </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>	Description : Returns the database adaptor(s) that contains a seq_region with the supplied INSDC accession (or other seq_region name)
	Arg    : Int
	Exceptions  : None
	Return type : Arrayref of Bio::EnsEMBL::DBSQL::DatabaseAdaptor
 </pre><div id="codesection-get_all_by_accession" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
	<img id='codesection-get_all_by_accession-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-get_all_by_accession-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-get_all_by_accession-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><pre class="fragment">sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#a4118bf6e1922602c1f296bed76e4dddf">get_all_by_accession</a> {
  my ( $self, $acc ) = @_;
  my $dba = $self-&gt;{dbas_by_vacc}{$acc};
  <span class="keywordflow">if</span> ( !defined $dba ) {
    $acc =~ s/\.[0-9]+$<span class="comment">//x;</span>
    $dba = $self-&gt;{dbas_by_acc}{$acc};
  }
  <span class="keywordflow">return</span> $dba;
}
</pre></div> </div> 
</div>
</div>
<a class="anchor" id="aa51ea23e88d57638d80daddb9b425618"></a><!-- doxytag: member="Bio::EnsEMBL::LookUp::LocalLookUp::get_all_by_dbname" ref="aa51ea23e88d57638d80daddb9b425618" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Arrayref Bio::EnsEMBL::LookUp::LocalLookUp::get_all_by_dbname </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>	Description : Returns all database adaptors that have the supplied dbname
	Arg    : String
	Exceptions  : None
	Return type : Arrayref of Bio::EnsEMBL::DBSQL::DatabaseAdaptor
 </pre><div id="codesection-get_all_by_dbname" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
	<img id='codesection-get_all_by_dbname-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-get_all_by_dbname-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-get_all_by_dbname-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><pre class="fragment">sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#aa51ea23e88d57638d80daddb9b425618">get_all_by_dbname</a> {
  my ( $self, $dbname ) = @_;

  my @filtered_dbas;

  my $all = $self-&gt;get_all();
  <span class="keywordflow">foreach</span> my $dba ( values %{ $self-&gt;{dbas} } ) {
    <span class="keywordflow">if</span> ( $dba-&gt;dbc-&gt;dbname eq $dbname ) {
      push @filtered_dbas, $dba;
    }
  }

  <span class="keywordflow">return</span> \@filtered_dbas;
}
</pre></div> </div> 
</div>
</div>
<a class="anchor" id="a0d19a031f2228d203741fb04ba9ba931"></a><!-- doxytag: member="Bio::EnsEMBL::LookUp::LocalLookUp::get_all_by_name_pattern" ref="a0d19a031f2228d203741fb04ba9ba931" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Arrayref Bio::EnsEMBL::LookUp::LocalLookUp::get_all_by_name_pattern </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>	Description : Return all database adaptors that have an alias/name that match the supplied regexp
	Arg    : String
	Exceptions  : None
	Return type : Arrayref of Bio::EnsEMBL::DBSQL::DatabaseAdaptor
 </pre><div id="codesection-get_all_by_name_pattern" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
	<img id='codesection-get_all_by_name_pattern-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-get_all_by_name_pattern-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-get_all_by_name_pattern-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><pre class="fragment">sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#a0d19a031f2228d203741fb04ba9ba931">get_all_by_name_pattern</a> {
  my ( $self, $pattern ) = @_;
  my %dbas;
  <span class="keywordflow">for</span> my $name ( keys %{ $self-&gt;{dbas_by_name} } ) {
    <span class="keywordflow">if</span> ( $name =~ m/$pattern/x ) {
      <span class="keywordflow">for</span> my $dba ( @{ $self-&gt;{dbas_by_name}{$name} } ) {
        my $key = <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#a33750117ab1c474dd86ac60ffd7a0746">_dba_to_locator</a>($dba);
        $dbas{$key} = $dba;
      }
    }
  }
  <span class="keywordflow">return</span> [ values(%dbas) ];
}
</pre></div> </div> 
</div>
</div>
<a class="anchor" id="a9e6aab80a79229eefdab5395ca7d56e3"></a><!-- doxytag: member="Bio::EnsEMBL::LookUp::LocalLookUp::get_all_by_taxon_branch" ref="a9e6aab80a79229eefdab5395ca7d56e3" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Bio::EnsEMBL::LookUp::LocalLookUp::get_all_by_taxon_branch </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented method</p>
<div id="codesection-get_all_by_taxon_branch" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
	<img id='codesection-get_all_by_taxon_branch-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-get_all_by_taxon_branch-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-get_all_by_taxon_branch-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><pre class="fragment">sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#a9e6aab80a79229eefdab5395ca7d56e3">get_all_by_taxon_branch</a> {
  my ( $self, $root ) = @_;
  <span class="keywordflow">if</span> ( ref($root) ne <span class="stringliteral">&#39;Bio::EnsEMBL::Taxonomy::TaxonomyNode&#39;</span> ) {
    <span class="keywordflow">if</span> ( looks_like_number($root) ) {
      $root = $self-&gt;taxonomy_adaptor()-&gt;fetch_by_taxon_id($root);
    }
    <span class="keywordflow">else</span> {
      ($root) =
        @{ $self-&gt;taxonomy_adaptor()-&gt;fetch_all_by_name($root) };
    }
  }
  <span class="keywordflow">if</span> ( !defined $root ) {
    <span class="keywordflow">return</span> [];
  }
  my @genomes = @{ $self-&gt;get_all_by_taxon_id( $root-&gt;taxon_id() ) };
  <span class="keywordflow">for</span> my $node ( @{ $root-&gt;adaptor()-&gt;fetch_descendants($root) } ) {
    @genomes = ( @genomes,
                 @{ $self-&gt;get_all_by_taxon_id( $node-&gt;taxon_id() ) } );
  }
  <span class="keywordflow">return</span> \@genomes;
}
</pre></div> </div> 
</div>
</div>
<a class="anchor" id="a1cb07f5441b9b25ea8ffe85b93f7ac1c"></a><!-- doxytag: member="Bio::EnsEMBL::LookUp::LocalLookUp::get_all_by_taxon_id" ref="a1cb07f5441b9b25ea8ffe85b93f7ac1c" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Arrayref Bio::EnsEMBL::LookUp::LocalLookUp::get_all_by_taxon_id </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>	Description : Returns all database adaptors that have the supplied taxonomy ID
	Arg    : Int
	Exceptions  : None
	Return type : Arrayref of Bio::EnsEMBL::DBSQL::DatabaseAdaptor
 </pre><div id="codesection-get_all_by_taxon_id" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
	<img id='codesection-get_all_by_taxon_id-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-get_all_by_taxon_id-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-get_all_by_taxon_id-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><pre class="fragment">sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#a1cb07f5441b9b25ea8ffe85b93f7ac1c">get_all_by_taxon_id</a> {
  my ( $self, $id ) = @_;
  <span class="keywordflow">return</span> $self-&gt;{dbas_by_taxid}{$id} || [];
}
</pre></div> </div> 
</div>
</div>
<a class="anchor" id="ac78e43c2af6f50038c6ced78ce345855"></a><!-- doxytag: member="Bio::EnsEMBL::LookUp::LocalLookUp::get_all_DBConnections" ref="ac78e43c2af6f50038c6ced78ce345855" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Arrayref Bio::EnsEMBL::LookUp::LocalLookUp::get_all_DBConnections </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>	Description : Return all database connections used by the DBAs retrieved from the registry
	Arg    : None
	Exceptions  : None
	Return type : Arrayref of Bio::EnsEMBL::DBSQL::DBConnection
 </pre><div id="codesection-get_all_DBConnections" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
	<img id='codesection-get_all_DBConnections-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-get_all_DBConnections-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-get_all_DBConnections-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><pre class="fragment">sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#ac78e43c2af6f50038c6ced78ce345855">get_all_DBConnections</a> {
  my ($self) = @_;
  my $adaptors = $self-&gt;registry()-&gt;get_all_DBAdaptors();
  my %dbcs;
  <span class="keywordflow">foreach</span> my $dba ( values %{ $self-&gt;{dbas} } ) {
    my $dbc = $dba-&gt;dbc();
    $dbcs{ <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#a2e5521e5f6f171fe369f8834e37dba80">_dbc_to_locator</a>($dbc) } = $dbc;
  }
  <span class="keywordflow">return</span> [ values %dbcs ];
}
</pre></div> </div> 
</div>
</div>
<a class="anchor" id="aa6033f7cc60294138811c3c611e884fa"></a><!-- doxytag: member="Bio::EnsEMBL::LookUp::LocalLookUp::get_all_dbnames" ref="aa6033f7cc60294138811c3c611e884fa" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Arrayref Bio::EnsEMBL::LookUp::LocalLookUp::get_all_dbnames </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>	Description : Return all database names used by the DBAs retrieved from the registry
	Arg    : None
	Exceptions  : None
	Return type : Arrayref of strings
 </pre><div id="codesection-get_all_dbnames" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
	<img id='codesection-get_all_dbnames-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-get_all_dbnames-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-get_all_dbnames-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><pre class="fragment">sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#aa6033f7cc60294138811c3c611e884fa">get_all_dbnames</a> {
  my ($self) = @_;
  my %dbnames;
  <span class="keywordflow">foreach</span> my $dba ( values %{ $self-&gt;{dbas} } ) {
    my $dbc = $dba-&gt;dbc();
    $dbnames{ $dbc-&gt;dbname }++;
  }
  <span class="keywordflow">return</span> [ keys %dbnames ];
}
</pre></div> </div> 
</div>
</div>
<a class="anchor" id="ace7351dd3762ae8b47055a3ec875a994"></a><!-- doxytag: member="Bio::EnsEMBL::LookUp::LocalLookUp::get_all_names" ref="ace7351dd3762ae8b47055a3ec875a994" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Arrayref Bio::EnsEMBL::LookUp::LocalLookUp::get_all_names </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>	Description : Return list of all species names registered with the helper
	Exceptions  : None
	Return type : Arrayref of strings
 </pre><div id="codesection-get_all_names" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
	<img id='codesection-get_all_names-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-get_all_names-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-get_all_names-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><pre class="fragment">sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#ace7351dd3762ae8b47055a3ec875a994">get_all_names</a> {
  my ($self) = @_;
  <span class="keywordflow">return</span> [ keys( %{ $self-&gt;{dbas_by_name} } ) ];
}
</pre></div> </div> 
</div>
</div>
<a class="anchor" id="ab3bcc587a34d213de61c101fa56574ce"></a><!-- doxytag: member="Bio::EnsEMBL::LookUp::LocalLookUp::get_all_taxon_ids" ref="ab3bcc587a34d213de61c101fa56574ce" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Arrayref Bio::EnsEMBL::LookUp::LocalLookUp::get_all_taxon_ids </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>	Description : Return list of all taxon IDs registered with the helper
	Exceptions  : None
	Return type : Arrayref of integers
 </pre><div id="codesection-get_all_taxon_ids" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
	<img id='codesection-get_all_taxon_ids-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-get_all_taxon_ids-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-get_all_taxon_ids-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><pre class="fragment">sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#ab3bcc587a34d213de61c101fa56574ce">get_all_taxon_ids</a> {
  my ($self) = @_;
  <span class="keywordflow">return</span> [ keys( %{ $self-&gt;{dbas_by_taxid} } ) ];
}
</pre></div> </div> 
</div>
</div>
<a class="anchor" id="ab19b87fe6efb3a24087f9da2776603e1"></a><!-- doxytag: member="Bio::EnsEMBL::LookUp::LocalLookUp::get_all_versioned_accessions" ref="ab19b87fe6efb3a24087f9da2776603e1" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Arrayref Bio::EnsEMBL::LookUp::LocalLookUp::get_all_versioned_accessions </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>	Description : Return list of all versioned INSDC sequence accessions (or other seq_region names) registered with the helper
	Exceptions  : None
	Return type : Arrayref of strings
 </pre><div id="codesection-get_all_versioned_accessions" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
	<img id='codesection-get_all_versioned_accessions-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-get_all_versioned_accessions-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-get_all_versioned_accessions-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><pre class="fragment">sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#ab19b87fe6efb3a24087f9da2776603e1">get_all_versioned_accessions</a> {
  my ($self) = @_;
  <span class="keywordflow">return</span> [ keys( %{ $self-&gt;{dbas_by_vacc} } ) ];
}
</pre></div> </div> 
</div>
</div>
<a class="anchor" id="a5c7d5c135fedb671a2abf8db8f92630b"></a><!-- doxytag: member="Bio::EnsEMBL::LookUp::LocalLookUp::get_all_versioned_assemblies" ref="a5c7d5c135fedb671a2abf8db8f92630b" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Arrayref Bio::EnsEMBL::LookUp::LocalLookUp::get_all_versioned_assemblies </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>	Description : Return list of all versioned INSDC assembly accessions registered with the helper
	Exceptions  : None
	Return type : Arrayref of strings
 </pre><div id="codesection-get_all_versioned_assemblies" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
	<img id='codesection-get_all_versioned_assemblies-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-get_all_versioned_assemblies-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-get_all_versioned_assemblies-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><pre class="fragment">sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#a5c7d5c135fedb671a2abf8db8f92630b">get_all_versioned_assemblies</a> {
  my ($self) = @_;
  <span class="keywordflow">return</span> [ keys( %{ $self-&gt;{dbas_by_vgc} } ) ];
}
</pre></div> </div> 
</div>
</div>
<a class="anchor" id="ad8b2a99f0bcc7d7c03d30159526577f7"></a><!-- doxytag: member="Bio::EnsEMBL::LookUp::LocalLookUp::get_by_assembly_accession" ref="ad8b2a99f0bcc7d7c03d30159526577f7" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Bio::EnsEMBL::DBSQL::DatabaseAdaptor Bio::EnsEMBL::LookUp::LocalLookUp::get_by_assembly_accession </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>	Description : Returns the database adaptor that contains the assembly with the supplied INSDC assembly accession
	Arg    : Int
	Exceptions  : None
	Return type : Bio::EnsEMBL::DBSQL::DatabaseAdaptor
 </pre><div id="codesection-get_by_assembly_accession" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
	<img id='codesection-get_by_assembly_accession-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-get_by_assembly_accession-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-get_by_assembly_accession-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><pre class="fragment">sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#ad8b2a99f0bcc7d7c03d30159526577f7">get_by_assembly_accession</a> {
  my ( $self, $acc ) = @_;
  my $dba = $self-&gt;{dbas_by_vgc}{$acc};
  <span class="keywordflow">if</span> ( !defined $dba ) {
    $acc =~ s/\.[0-9]+$<span class="comment">//x;</span>
    $dba = $self-&gt;{dbas_by_gc}{$acc};
  }
  <span class="keywordflow">return</span> $dba;
}
</pre></div> </div> 
</div>
</div>
<a class="anchor" id="a8e4371b3e5c7129d9cf277e294cc0a5e"></a><!-- doxytag: member="Bio::EnsEMBL::LookUp::LocalLookUp::get_by_name_exact" ref="a8e4371b3e5c7129d9cf277e294cc0a5e" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Arrayref Bio::EnsEMBL::LookUp::LocalLookUp::get_by_name_exact </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>	Description : Return all database adaptors that have the supplied string as an alias/name
	Arg    : String
	Exceptions  : None
	Return type : Arrayref of Bio::EnsEMBL::DBSQL::DatabaseAdaptor
 </pre><div id="codesection-get_by_name_exact" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
	<img id='codesection-get_by_name_exact-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-get_by_name_exact-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-get_by_name_exact-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><pre class="fragment">sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#a8e4371b3e5c7129d9cf277e294cc0a5e">get_by_name_exact</a> {
  my ( $self, $name ) = @_;
  <span class="keywordflow">return</span> $self-&gt;{dbas_by_name}{$name};
}
</pre></div> </div> 
</div>
</div>
<a class="anchor" id="a0b69cc4af6ad4a2ec86e8d0f21399d7a"></a><!-- doxytag: member="Bio::EnsEMBL::LookUp::LocalLookUp::load_registry_from_file" ref="a0b69cc4af6ad4a2ec86e8d0f21399d7a" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Bio::EnsEMBL::LookUp::LocalLookUp::load_registry_from_file </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented method</p>
<div id="codesection-load_registry_from_file" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
	<img id='codesection-load_registry_from_file-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-load_registry_from_file-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-load_registry_from_file-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><pre class="fragment">sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#a0b69cc4af6ad4a2ec86e8d0f21399d7a">load_registry_from_file</a> {
  my ( $self, $file ) = @_;
  open( my $fh, <span class="charliteral">&#39;&lt;&#39;</span>, $file ) or croak &quot;Cannot open file $file: $!&quot;;
  my $data = do { local $/ = undef; &lt;$fh&gt; };
  close($fh);
  <span class="keywordflow">if</span> ( defined $data &amp;&amp; $data ne <span class="stringliteral">&#39;&#39;</span> ) {
    $self-&gt;_load_registry_from_json($data);
  }
  <span class="keywordflow">return</span>;
}
</pre></div> </div> 
</div>
</div>
<a class="anchor" id="a74356e09c3243bcbab5121c24c26eee6"></a><!-- doxytag: member="Bio::EnsEMBL::LookUp::LocalLookUp::load_registry_from_url" ref="a74356e09c3243bcbab5121c24c26eee6" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Bio::EnsEMBL::LookUp::LocalLookUp::load_registry_from_url </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented method</p>
<div id="codesection-load_registry_from_url" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
	<img id='codesection-load_registry_from_url-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-load_registry_from_url-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-load_registry_from_url-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><pre class="fragment">sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#a74356e09c3243bcbab5121c24c26eee6">load_registry_from_url</a> {
  my ( $self, $url ) = @_;
  my $json = <span class="keyword">get</span>($url);
  croak <span class="stringliteral">&quot;Could not retrieve JSON from $url: $@&quot;</span> unless defined $json;
  $self-&gt;_load_registry_from_json($json);
  <span class="keywordflow">return</span>;
}
</pre></div> </div> 
</div>
</div>
<a class="anchor" id="ab78380bb6a3ec6c927925f07b4079964"></a><!-- doxytag: member="Bio::EnsEMBL::LookUp::LocalLookUp::new" ref="ab78380bb6a3ec6c927925f07b4079964" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Bio::EnsEMBL::LookUp::LocalLookUp::new </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Undocumented method</p>
<div id="codesection-new" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
	<img id='codesection-new-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-new-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-new-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><pre class="fragment">sub <span class="keyword">new</span> {
  my ( $class, @args ) = @_;
  my $self = bless( {}, ref($class) || $class );
  my ( $reg, $url, $file, $nocache, $cache_file, $clear_cache, $skip_contigs ) =
    rearrange( [qw(registry url file no_cache cache_file clear_cache skip_contigs)],
               @args );
  <span class="keywordflow">if</span> ( !defined $reg ) { $reg = <span class="stringliteral">&#39;Bio::EnsEMBL::Registry&#39;</span> }
  $self-&gt;{<a class="code" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#a6e44afef58e07ac928c5ee914a06978b">registry</a>}      = $reg;
  $self-&gt;{dbas_by_taxid} = {};
  $self-&gt;{dbas_by_name}  = {};
  $self-&gt;{dbas_by_acc}   = {};
  $self-&gt;{dbas_by_vacc}  = {};
  $self-&gt;{dbas_by_gc}    = {};
  $self-&gt;{dbas_by_vgc}   = {};
  $self-&gt;{dbas}          = {};
  $self-&gt;{dbc_meta}      = {};
  $self-&gt;{skip_contigs}  = $skip_contigs;
  $cache_file ||= $default_cache_file;
  $self-&gt;cache_file($cache_file);

  <span class="keywordflow">if</span> ( defined $clear_cache &amp;&amp; $clear_cache == 1 ) {
    $self-&gt;clear_cache();
  }
  <span class="keywordflow">if</span> ( !$nocache &amp;&amp; !defined $file &amp;&amp; -e $cache_file ) {
    $file = $cache_file;
  }
  <span class="keywordflow">if</span> ( defined $file ) {
    $self-&gt;load_registry_from_file($file);
  }
  elsif ( defined $url ) {
    $self-&gt;load_registry_from_url($url);
  }
  <span class="keywordflow">else</span> {
    $self-&gt;update_from_registry();
  }
  <span class="keywordflow">if</span> ( !$nocache &amp;&amp; !-e $cache_file ) {
    $self-&gt;write_registry_to_file($cache_file);
  }
  <span class="keywordflow">return</span> $self;
} ## end sub <span class="keyword">new</span>
</pre></div> </div> 
</div>
</div>
<a class="anchor" id="ae9a05fa751b5559b883a114392f31ad9"></a><!-- doxytag: member="Bio::EnsEMBL::LookUp::LocalLookUp::register_all_dbs" ref="ae9a05fa751b5559b883a114392f31ad9" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public void Bio::EnsEMBL::LookUp::LocalLookUp::register_all_dbs </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>	Description : Helper method to load the registry with all multispecies core databases on the supplied server
	Arg    : Host
	Arg    : Port
	Arg    : User
	Arg    : Password
	Arg    : (optional) String with database regexp (default is _collection_core_[0-9]_eVersion_[0-9]+)
	Exceptions  : None
	Return type : None
 </pre><div id="codesection-register_all_dbs" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
	<img id='codesection-register_all_dbs-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-register_all_dbs-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-register_all_dbs-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><pre class="fragment">sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp.html#a1e2fd5181ddeae8d7683a56affa1733c">register_all_dbs</a> {
  my ( $class, $host, $port, $user, $pass, $regexp ) = @_;

  <span class="keywordflow">if</span> ( !$regexp ) {
    $regexp = <span class="stringliteral">&#39;_core_[0-9]+_&#39;</span> . software_version() . <span class="stringliteral">&#39;_[0-9]+&#39;</span>;
  }

  <span class="keywordflow">if</span> ( !defined $host ) {
    croak <span class="stringliteral">&quot;Host must be supplied for registration of databases&quot;</span>;
  }

  <span class="keywordflow">if</span> ( !defined $port ) {
    croak
<span class="stringliteral">&quot;Port must be supplied for registration of databases on host $host&quot;</span>;
  }

  my $str = <span class="stringliteral">&quot;DBI:mysql:host=$host;port=$port&quot;</span>;
  my $dbh = DBI-&gt;connect( $str, $user, $pass ) ||
    croak <span class="stringliteral">&quot;Could not connect to database $str (user=$user, pass=$pass)&quot;</span>;

  my @dbnames =
    grep { m/$regexp/xi }
    map  { $_-&gt;[0] } @{ $dbh-&gt;selectall_arrayref(<span class="stringliteral">&#39;SHOW DATABASES&#39;</span>) };

  <span class="keywordflow">for</span> my $db (@dbnames) {
    <span class="keywordflow">if</span> ( $db =~ m/.*_collection_core_.*/ ) {
      <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#a7d8f87ea6f820cdc85a9cef64f5cc527">_register_multispecies_core</a>( $host, $port, $user, $pass, $db );
    }
    <span class="keywordflow">else</span> {
      <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#a6087a191688596a0169895507c2e1948">_register_singlespecies_core</a>( $host, $port, $user, $pass, $db );
    }
  }
  <span class="keywordflow">return</span>;
} ## end sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp.html#a1e2fd5181ddeae8d7683a56affa1733c">register_all_dbs</a>
</pre></div> </div> 
</div>
</div>
<a class="anchor" id="a6e44afef58e07ac928c5ee914a06978b"></a><!-- doxytag: member="Bio::EnsEMBL::LookUp::LocalLookUp::registry" ref="a6e44afef58e07ac928c5ee914a06978b" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Registry Bio::EnsEMBL::LookUp::LocalLookUp::registry </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>
  Arg [1]     : Registry module to use (default is Bio::EnsEMBL::Registry)
  Description : Sets and retrieves the Registry 
  Returntype  : Registry if set; otherwise undef
  Exceptions  : if an attempt is made to set the value more than once
  Status      : Stable
 </pre><div id="codesection-registry" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
	<img id='codesection-registry-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-registry-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-registry-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><pre class="fragment">sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#a6e44afef58e07ac928c5ee914a06978b">registry</a> {
  my ( $self, $registry ) = @_;
  <span class="keywordflow">if</span> ( defined $registry ) {
    <span class="keywordflow">if</span> ( exists $self-&gt;{registry} ) {
      <span class="keywordflow">throw</span>(<span class="stringliteral">&#39;Cannot reset the Registry object; already defined &#39;</span>);
    }
    $self-&gt;{<a class="code" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#a6e44afef58e07ac928c5ee914a06978b">registry</a>} = $registry;
    $self-&gt;update_from_registry();
  }
  <span class="keywordflow">return</span> $self-&gt;{<a class="code" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#a6e44afef58e07ac928c5ee914a06978b">registry</a>};
}
</pre></div> </div> 
</div>
</div>
<a class="anchor" id="a41a04d896570e072c58955bc7849a0f5"></a><!-- doxytag: member="Bio::EnsEMBL::LookUp::LocalLookUp::taxonomy_adaptor" ref="a41a04d896570e072c58955bc7849a0f5" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Bio::EnsEMBL::Taxonomy::DBSQL::DBAdaptor Bio::EnsEMBL::LookUp::LocalLookUp::taxonomy_adaptor </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>	Description	: Get/set the taxonomy adaptor
	Arg	: (optional) Bio::EnsEMBL::Taxonomy::DBSQL::DBAdaptor
	Caller    : Internal
	Status    : Stable
	Return		: Bio::EnsEMBL::Taxonomy::DBSQL::DBAdaptor
 </pre><div id="codesection-taxonomy_adaptor" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
	<img id='codesection-taxonomy_adaptor-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-taxonomy_adaptor-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-taxonomy_adaptor-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><pre class="fragment">sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#a41a04d896570e072c58955bc7849a0f5">taxonomy_adaptor</a> {
  my ( $self, $adaptor ) = @_;
  <span class="keywordflow">if</span> ( defined $adaptor ) {
    $self-&gt;{<a class="code" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#a41a04d896570e072c58955bc7849a0f5">taxonomy_adaptor</a>} = $adaptor;
  }
  elsif ( !defined $self-&gt;{taxonomy_adaptor} ) {
    $self-&gt;{<a class="code" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#a41a04d896570e072c58955bc7849a0f5">taxonomy_adaptor</a>} =
      Bio::EnsEMBL::Taxonomy::DBSQL::TaxonomyNodeAdaptor-&gt;new_public();
  }
  <span class="keywordflow">return</span> $self-&gt;{<a class="code" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#a41a04d896570e072c58955bc7849a0f5">taxonomy_adaptor</a>};
}
</pre></div> </div> 
</div>
</div>
<a class="anchor" id="a6e048fa6ac0febfc23051767c9beea83"></a><!-- doxytag: member="Bio::EnsEMBL::LookUp::LocalLookUp::update_from_registry" ref="a6e048fa6ac0febfc23051767c9beea83" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public Bio::EnsEMBL::LookUp::LocalLookUp::update_from_registry </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>	Description : Update internal hashes of database adaptors by name/taxids from the registry. Invoke when registry has been updated independently.
	Arg 	: (optional) If set to 1, do not update from a DBAdaptor if already processed (allows updates of an existing <a class="el" href="classBio_1_1EnsEMBL_1_1LookUp.html">LookUp</a> instance)
	Exceptions  : None
 </pre><div id="codesection-update_from_registry" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
	<img id='codesection-update_from_registry-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-update_from_registry-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-update_from_registry-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><pre class="fragment">sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#a6e048fa6ac0febfc23051767c9beea83">update_from_registry</a> {
  my ( $self, $update_only ) = @_;
  $self-&gt;_intern_db_connections();
  <span class="keywordflow">for</span> my $dba (
        @{ $self-&gt;registry()-&gt;get_all_DBAdaptors( -group =&gt; <span class="stringliteral">&#39;core&#39;</span> ) } )
  {
    $self-&gt;_hash_dba( $dba, $update_only );
        $dba-&gt;dbc()-&gt;disconnect_if_idle();
  }
  <span class="keywordflow">return</span>;
}
</pre></div> </div> 
</div>
</div>
<a class="anchor" id="aa4c72f3de0b7bef96ba8f8d8cf862f44"></a><!-- doxytag: member="Bio::EnsEMBL::LookUp::LocalLookUp::write_registry_to_file" ref="aa4c72f3de0b7bef96ba8f8d8cf862f44" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">public void Bio::EnsEMBL::LookUp::LocalLookUp::write_registry_to_file </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<pre>	Description	: Write the contents of the registry and species lists to a JSON file
	Arg	: File name
	Return		: None
 </pre><div id="codesection-write_registry_to_file" class="dynheader closed" style="cursor:pointer;" onclick="return toggleVisibility(this)">  
	<img id='codesection-write_registry_to_file-trigger' src='closed.png' style='display:inline'><b>Code:</b>
</div>
<div id='codesection-write_registry_to_file-summary' class='dyncontent' style='display:block;font-size:small;'>click to view</div>
<div id='codesection-write_registry_to_file-content' class='dyncontent' style='display: none;'> 
 <div class="fragment"><pre class="fragment">sub <a class="code" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html#aa4c72f3de0b7bef96ba8f8d8cf862f44">write_registry_to_file</a> {
  my ( $self, $file ) = @_;
  my $json = $self-&gt;_registry_to_json();
  <span class="keywordflow">if</span> ($json) {
    open( my $fh, <span class="charliteral">&#39;&gt;&#39;</span>, $file ) ||
      croak <span class="stringliteral">&quot;Cannot open &#39;${file}&#39; for writing: $!&quot;</span>;
    print $fh $json;
    close($fh);
  }
  <span class="keywordflow">return</span>;
}
</pre></div> </div> 
</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>Bio/EnsEMBL/LookUp/<a class="el" href="LocalLookUp_8pm_source.html">LocalLookUp.pm</a></li>
</ul>
</div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="namespaceBio.html">Bio</a>      </li>
      <li class="navelem"><a class="el" href="namespaceBio_1_1EnsEMBL.html">EnsEMBL</a>      </li>
      <li class="navelem"><a class="el" href="namespaceBio_1_1EnsEMBL_1_1LookUp.html">LookUp</a>      </li>
      <li class="navelem"><a class="el" href="classBio_1_1EnsEMBL_1_1LookUp_1_1LocalLookUp.html">LocalLookUp</a>      </li>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

  </div>
</body>
</html>
